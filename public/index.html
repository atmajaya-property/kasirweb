<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aplikasi Kasir Web</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- STRUK SEDERHANA -->
<div class="struk-container" id="strukContainer">
  <div class="struk-header">
    <h2 id="strukStoreName">TOKO KITA</h2>
  </div>
  <div class="struk-tanggal" id="strukDate"></div>
  <table class="struk-table">
    <thead>
      <tr>
        <th>Item</th>
        <th>Harga</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody id="strukItems"></tbody>
    <tfoot id="strukTotals"></tfoot>
  </table>
  <div class="struk-footer">
    Terima Kasih
  </div>
</div>

<!-- LOGIN PAGE -->
<div id="loginPage" class="page active">
  <div class="login-card">
    <h2>Login Kasir</h2>
    <input id="username" type="text" placeholder="Username" />
    <input id="password" type="password" placeholder="Password" />
    <button id="loginBtn">Masuk</button>
    <p id="loginMessage" style="color:#ff9b9b;min-height:1.2em;margin-top:8px"></p>
  </div>
</div>

<!-- KASIR PAGE -->
<div id="kasirPage" class="page">
  <header>
    <h1 id="namaToko">Loading...</h1>
    <div class="nav-tabs">
      <button class="nav-tab active" data-tab="kasir">ğŸ’¼ Kasir</button>
      <button class="nav-tab" data-tab="manajemen" id="tabManajemen" style="display: none">ğŸ“¦ Management</button>
      <button class="nav-tab" data-tab="toko" id="tabToko" style="display: none">ğŸª Toko</button>
      <button class="nav-tab" data-tab="user" id="tabUser" style="display: none">ğŸ‘¥ User</button>
      <button class="nav-tab" data-tab="laporan">ğŸ“Š Laporan</button>
      <button class="nav-tab" data-tab="setting" id="tabSetting" style="display: none">âš™ï¸ Setting</button>
    </div>
    <button id="logoutBtn">Keluar</button>
  </header>

  <!-- TAB KASIR -->
  <div class="tab-content active" data-tab="kasir">
    <div class="container">
      <section class="menu-section">
        <div class="menu-header">
          <h2>ğŸ“‹ Menu</h2>
          <div class="search-wrap">
            <div class="search-input">
              <span class="search-icon">ğŸ”</span>
              <input id="menuSearch" type="search" placeholder="Cari menu..." aria-label="Cari menu" />
              <button id="clearSearch" title="Bersihkan pencarian" style="background:transparent;border:none;color:var(--muted);cursor:pointer">âœ–</button>
            </div>
          </div>
        </div>

        <div class="menu-list-container">
          <div id="menuList" class="menu-list"></div>
          <div id="menuLoading" style="display:none">
            <div class="spinner"></div><div>Memuat menu...</div>
          </div>
        </div>

        <div class="menu-pagination">
          <button class="pagination-btn" id="prevPage">âª Prev</button>
          <span class="pagination-info" id="pageInfo">Hal 1</span>
          <button class="pagination-btn" id="nextPage">Next â©</button>
        </div>
      </section>

      <section class="transaksi-section">
        <h2>ğŸ’° Transaksi</h2>
        
        <div class="transaksi-content">
          <table id="tblTransaksi">
            <thead>
              <tr>
                <th>Menu</th>
                <th>Harga</th>
                <th>Jml</th>
                <th>Subtotal</th>
                <th></th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="total-area">
          TOTAL: Rp <span id="totalHarga">0</span>
        </div>

        <div class="input-area">
  <!-- DEFAULT: Single Cash Input -->
  <div class="payment-single" id="paymentSingle">
    <div class="cash-display">
      <label>ğŸ’µ Pembayaran:</label>
      <div class="cash-amount">
        <span>Rp</span>
        <input id="cashInput" type="text" placeholder="0" value="0" />
      </div>
    </div>
    <div class="kembali-display">
      <label>ğŸ’° Kembali:</label>
      <div class="kembali-amount">Rp <span id="uangKembali">0</span></div>
    </div>
    <button class="btn-payment-toggle" id="btnPaymentToggle" title="Multiple Payment">
      ğŸ’³+
    </button>
  </div>

 <!-- EXPANDED: Multiple Payment Horizontal -->
<div class="payment-multiple" id="paymentMultiple" style="display: none;">
  <div class="payment-methods-horizontal">
    <!-- Tunai -->
    <div class="payment-method-horizontal active" data-method="tunai">
      <div class="method-badge">
        <span class="method-icon">ğŸ’µ</span>
        <input type="text" class="payment-input-small" data-method="tunai" placeholder="Tunai" value="0">
      </div>
    </div>

    <!-- Debit -->
    <div class="payment-method-horizontal" data-method="debit">
      <div class="method-badge">
        <span class="method-icon">ğŸ’³</span>
        <input type="text" class="payment-input-small" data-method="debit" placeholder="Debit" value="0">
      </div>
    </div>

    <!-- E-Wallet -->
    <div class="payment-method-horizontal" data-method="ewallet">
      <div class="method-badge">
        <span class="method-icon">ğŸ“±</span>
        <input type="text" class="payment-input-small" data-method="ewallet" placeholder="E-Wallet" value="0">
      </div>
    </div>

    <!-- QRIS -->
    <div class="payment-method-horizontal" data-method="qris">
      <div class="method-badge">
        <span class="method-icon">ğŸ”—</span>
        <input type="text" class="payment-input-small" data-method="qris" placeholder="QRIS" value="0">
      </div>
    </div>
  </div>

  <div class="payment-summary-horizontal">
    <div class="summary-total">
      <span>Total: <strong id="paymentTotalH">Rp 0</strong></span>
      <span>Bayar: <strong id="paymentTotalPaidH" class="total-paid">Rp 0</strong></span>
      <span>Kembali: <strong id="paymentChangeH" class="change-amount">Rp 0</strong></span>
    </div>
    <button class="btn-close-payment-h" id="btnClosePaymentH">âœ•</button>
  </div>
</div>
  
</div>
        <button id="btnSelesai" class="selesai">
          ğŸ–¨ï¸ Selesai & Cetak
        </button>
      </section>
    </div>
  </div>

  <!-- TAB MANAGEMENT MENU -->
<div class="tab-content" data-tab="manajemen">
  <section class="manajemen-section">
    <h2>ğŸ“¦ Management Menu</h2>
    
    <!-- Sub Tab Navigation -->
    <div class="subtab-nav">
      <button class="subtab-btn active" data-subtab="form-menu">â• Tambah/Edit Menu</button>
      <button class="subtab-btn" data-subtab="daftar-menu">ğŸ“‹ Daftar Menu</button>
    </div>

    <!-- Form Input Menu -->
    <div class="subtab-content active" data-subtab="form-menu">
      <div class="form-menu">
        <h3>â• Tambah/Edit Menu</h3>
        <div class="form-group">
          <label for="inputNamaMenu">Nama Menu:</label>
          <input type="text" id="inputNamaMenu" placeholder="Nama menu">
        </div>
        <div class="form-group">
          <label for="inputKategori">Kategori:</label>
          <select id="inputKategori">
            <option value="">Pilih Kategori</option>
            <option value="Makanan Utama">Makanan Utama</option>
            <option value="Minuman">Minuman</option>
            <option value="Snack">Snack</option>
            <option value="Sembako - Beras & Bijian">Sembako - Beras & Bijian</option>
            <option value="Sembako - Minyak Goreng">Sembako - Minyak Goreng</option>
            <option value="Sembako - Gula & Garam">Sembako - Gula & Garam</option>
            <option value="Sembako - Telur & Susu">Sembako - Telur & Susu</option>
            <option value="Sembako - Bumbu Dapur">Sembako - Bumbu Dapur</option>
            <option value="Lainnya">Lainnya</option>
          </select>
        </div>
        <div class="form-group">
          <label for="inputHarga">Harga (Rp):</label>
          <input type="number" id="inputHarga" placeholder="0" min="0">
        </div>
        <div class="form-group">
          <label for="inputStok">Stok:</label>
          <input type="number" id="inputStok" placeholder="0" min="0" value="0">
        </div>
        <div class="form-group">
          <label for="inputToko">Toko:</label>
          <select id="inputToko">
            <option value="current">Toko Saat Ini</option>
            <option value="ALL">Semua Toko (Global)</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="inputStatusMenu">Status:</label>
          <select id="inputStatusMenu">
            <option value="Aktif">âœ… Aktif</option>
            <option value="Nonaktif">â¸ï¸ Nonaktif</option>
          </select>
        </div>
        <div class="form-actions">
          <button id="btnSimpanMenu" class="btn btn-primary">ğŸ’¾ Simpan Menu</button>
          <button id="btnBatalEdit" class="btn btn-secondary" style="display:none">âŒ Batal Edit</button>
          <span id="menuIdDisplay" style="color:var(--muted);font-size:0.8rem;margin-left:10px;"></span>
        </div>
      </div>
    </div>

    <!-- Daftar Menu -->
    <div class="subtab-content" data-subtab="daftar-menu">
      <div class="daftar-menu">
        <h3>ğŸ“‹ Daftar Menu</h3>
        <div class="search-wrap">
          <input type="text" id="searchMenuManagement" placeholder="ğŸ” Cari menu..." class="search-input">
        </div>
        <div class="table-container">
          <table class="manajemen-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Nama Menu</th>
                <th>Kategori</th>
                <th>Harga</th>
                <th>Stok</th>
                <th>Status</th>
                <th>Toko</th>
                <th>Aksi</th>
              </tr>
            </thead>
            <tbody id="daftarMenuBody">
              <!-- Data menu akan diisi oleh JavaScript -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- TAB MANAGEMENT TOKO -->
<div class="tab-content" data-tab="toko">
  <section class="manajemen-section">
    <h2>ğŸª Management Toko</h2>
    
    <!-- Sub Tab Navigation -->
    <div class="subtab-nav">
      <button class="subtab-btn active" data-subtab="form-toko">â• Tambah/Edit Toko</button>
      <button class="subtab-btn" data-subtab="daftar-toko">ğŸ“‹ Daftar Toko</button>
    </div>

    <!-- Form Input Toko -->
    <div class="subtab-content active" data-subtab="form-toko">
      <div class="form-menu">
        <h3>â• Tambah/Edit Toko</h3>
        <div class="form-group">
          <label for="inputIdToko">ID Toko:</label>
          <input type="text" id="inputIdToko" placeholder="Auto-generate" readonly>
        </div>
        <div class="form-group">
          <label for="inputNamaToko">Nama Toko:</label>
          <input type="text" id="inputNamaToko" placeholder="Nama toko">
        </div>
        <div class="form-group">
          <label for="inputAlamatToko">Alamat:</label>
          <textarea id="inputAlamatToko" placeholder="Alamat toko" rows="2"></textarea>
        </div>
        <div class="form-group">
          <label for="inputTeleponToko">Telepon:</label>
          <input type="text" id="inputTeleponToko" placeholder="Nomor telepon">
        </div>
        <div class="form-group">
          <label for="inputStatusToko">Status:</label>
          <select id="inputStatusToko">
            <option value="Aktif">Aktif</option>
            <option value="Nonaktif">Nonaktif</option>
          </select>
        </div>
        <div class="form-actions">
          <button id="btnSimpanToko" class="btn btn-primary">ğŸ’¾ Simpan Toko</button>
          <button id="btnBatalEditToko" class="btn btn-secondary" style="display:none">âŒ Batal Edit</button>
        </div>
      </div>
    </div>

    <!-- Daftar Toko -->
    <div class="subtab-content" data-subtab="daftar-toko">
      <div class="daftar-menu">
        <h3>ğŸ“‹ Daftar Toko</h3>
        <div class="search-wrap">
          <input type="text" id="searchTokoManagement" placeholder="ğŸ” Cari toko..." class="search-input">
        </div>
        <div class="table-container">
          <table class="manajemen-table">
            <thead>
              <tr>
                <th>ID Toko</th>
                <th>Nama Toko</th>
                <th>Alamat</th>
                <th>Telepon</th>
                <th>Status</th>
                <th>Aksi</th>
              </tr>
            </thead>
            <tbody id="daftarTokoBody">
              <!-- Data toko akan diisi oleh JavaScript -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- TAB MANAGEMENT USER -->
<div class="tab-content" data-tab="user">
  <section class="manajemen-section">
    <h2>ğŸ‘¥ Management User</h2>
    
    <!-- Sub Tab Navigation -->
    <div class="subtab-nav">
      <button class="subtab-btn active" data-subtab="form-user">â• Tambah/Edit User</button>
      <button class="subtab-btn" data-subtab="daftar-user">ğŸ“‹ Daftar User</button>
    </div>

    <!-- Form Input User -->
    <div class="subtab-content active" data-subtab="form-user">
      <div class="form-menu">
        <h3>â• Tambah/Edit User</h3>
        <div class="form-group">
          <label for="inputUsername">Username:</label>
          <input type="text" id="inputUsername" placeholder="Username untuk login">
        </div>
        <div class="form-group">
          <label for="inputPassword">Password:</label>
          <input type="password" id="inputPassword" placeholder="Password minimal 4 karakter">
        </div>
        <div class="form-group">
          <label for="inputNamaUser">Nama Lengkap:</label>
          <input type="text" id="inputNamaUser" placeholder="Nama lengkap user">
        </div>
        <div class="form-group">
          <label for="inputTokoUser">Toko:</label>
          <select id="inputTokoUser">
            <option value="">Pilih Toko</option>
          </select>
        </div>
        <div class="form-group">
          <label for="inputRoleUser">Role:</label>
          <select id="inputRoleUser">
            <option value="KASIR">Kasir</option>
            <option value="ADMIN">Admin</option>
            <option value="OWNER">Owner</option>
          </select>
        </div>
        <div class="form-group">
          <label for="inputStatusUser">Status:</label>
          <select id="inputStatusUser">
            <option value="Aktif">Aktif</option>
            <option value="Nonaktif">Nonaktif</option>
          </select>
        </div>
        <div class="form-actions">
          <button id="btnSimpanUser" class="btn btn-primary">ğŸ’¾ Simpan User</button>
          <button id="btnBatalEditUser" class="btn btn-secondary" style="display:none">âŒ Batal Edit</button>
        </div>
      </div>
    </div>

    <!-- Daftar User -->
    <div class="subtab-content" data-subtab="daftar-user">
      <div class="daftar-menu">
        <h3>ğŸ“‹ Daftar User</h3>
        <div class="search-wrap">
          <input type="text" id="searchUserManagement" placeholder="ğŸ” Cari user..." class="search-input">
        </div>
        <div class="table-container">
          <table class="manajemen-table">
            <thead>
              <tr>
                <th>Username</th>
                <th>Nama Lengkap</th>
                <th>Toko</th>
                <th>Role</th>
                <th>Status</th>
                <th>Aksi</th>
              </tr>
            </thead>
            <tbody id="daftarUserBody">
              <!-- Data user akan diisi oleh JavaScript -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>
</div>

    <!-- TAB LAPORAN MODERN -->
<div class="tab-content" data-tab="laporan">
  <section class="laporan-section">
    <div class="laporan-header">
      <h2>ğŸ“Š Laporan & Analytics</h2>
      <div class="laporan-period">
        <span id="laporanPeriodText">Periode: 7 Hari Terakhir</span>
      </div>
    </div>
    
    <!-- FILTER CARD -->
    <div class="filter-card">
      <div class="filter-header">
        <h3>ğŸ” Filter Laporan</h3>
        <button class="btn-filter-toggle" id="btnFilterToggle">â–¼</button>
      </div>
      
      <div class="filter-content" id="filterContent">
        <div class="filter-grid">
          <div class="filter-item">
            <label>ğŸ“… Dari Tanggal</label>
            <input type="date" id="startDate" class="modern-input">
          </div>
          
          <div class="filter-item">
            <label>ğŸ“… Sampai Tanggal</label>
            <input type="date" id="endDate" class="modern-input">
          </div>
          
          <!-- ğŸ”¥ FILTER MENU BARU (ganti filter kasir) -->
          <div class="filter-item">
            <label>ğŸ“¦ Filter Menu</label>
            <select id="filterMenu" class="modern-select">
              <option value="">Semua Menu</option>
            </select>
          </div>
          
          <!-- FILTER TOKO UNTUK OWNER -->
          <div class="filter-item" id="filterTokoGroup" style="display: none;">
            <label>ğŸª Filter Toko</label>
            <select id="filterTokoLaporan" class="modern-select">
              <option value="">Semua Toko</option>
            </select>
          </div>
        </div>
        
        <div class="filter-actions">
          <button class="btn-modern btn-primary" id="btnLoadLaporan">
            <span class="btn-icon">ğŸ“¥</span>
            Muat Laporan
          </button>
          <button class="btn-modern btn-secondary" id="btnResetFilter">
            <span class="btn-icon">ğŸ”„</span>
            Reset
          </button>
          <button class="btn-modern btn-export" id="btnExportLaporan">
            <span class="btn-icon">ğŸ“¤</span>
            Export PDF
          </button>
        </div>
      </div>
    </div>

    <!-- SUMMARY CARDS -->
    <div class="summary-cards" id="laporanSummary">
      <!-- Summary akan diisi oleh JavaScript -->
    </div>

    <!-- ANALYTICS DASHBOARD -->
    <div class="analytics-dashboard">
      <div class="analytics-card">
        <h3>ğŸ† Top 5 Menu Terlaris</h3>
        <div class="top-items-list" id="topItemsList">
          <div class="loading-analytics">Memuat data...</div>
        </div>
      </div>
      
      <div class="analytics-card">
        <h3>ğŸ“ˆ Kategori Terpopuler</h3>
        <div class="categories-chart" id="categoriesChart">
          <div class="loading-analytics">Memuat data...</div>
        </div>
      </div>
    </div>

    <!-- DATA TABLE (Sembunyikan default, tampilkan jika di-klik) -->
    <div class="data-table-section">
      <div class="table-header">
        <h3>ğŸ“‹ Detail Transaksi</h3>
        <button class="btn-toggle-table" id="btnToggleTable">
          <span class="table-icon">â¬‡ï¸</span>
          <span class="table-text">Tampilkan Tabel</span>
        </button>
      </div>
      
      <div class="table-container" id="tableContainer" style="display: none;">
        <div class="table-scroll">
          <table class="modern-table" id="tblLaporan">
            <thead>
              <tr>
                <th>Tanggal</th>
                <th>ID Transaksi</th>
                <th>Menu</th>
                <th>Qty</th>
                <th>Total</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody id="laporanBody">
              <!-- Data laporan akan diisi oleh JavaScript -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>
</div>
  <!-- TAB SETTING -->
  <div class="tab-content" data-tab="setting">
    <section class="setting-section">
      <h2>âš™ï¸ Pengaturan Aplikasi</h2>
      
      <div class="setting-group">
        <h3>ğŸ¨ Tampilan</h3>
        
        <div class="setting-item">
          <div class="setting-label">Theme</div>
          <div class="setting-control">
            <select id="settingTheme">
              <option value="dark">Dark</option>
              <option value="light">Light</option>
              <option value="auto">Auto</option>
            </select>
          </div>
        </div>

        <div class="setting-item">
          <div class="setting-label">Warna Aksen</div>
          <div class="setting-control">
            <input type="color" id="settingAccentColor" value="#14ffec">
            <div class="color-preview" id="accentPreview" style="background:#14ffec"></div>
          </div>
        </div>

        <div class="setting-item">
          <div class="setting-label">Warna Aksen Dark</div>
          <div class="setting-control">
            <input type="color" id="settingAccentDark" value="#0d7377">
            <div class="color-preview" id="accentDarkPreview" style="background:#0d7377"></div>
          </div>
        </div>
      </div>

      <div class="setting-group">
        <h3>ğŸ“± Aplikasi</h3>
        
        <div class="setting-item">
          <div class="setting-label">Nama Aplikasi</div>
          <div class="setting-control">
            <input type="text" id="settingAppName" value="KASIR WEB" placeholder="Nama aplikasi">
          </div>
        </div>

        <div class="setting-item">
          <div class="setting-label">Footer Struk</div>
          <div class="setting-control">
            <input type="text" id="settingStrukFooter" value="Terima Kasih" placeholder="Pesan footer struk">
          </div>
        </div>
      </div>

      <div class="laporan-actions">
        <button class="btn btn-primary" id="btnSaveSetting">ğŸ’¾ Simpan Setting</button>
        <button class="btn btn-secondary" id="btnResetSetting">ğŸ”„ Reset Default</button>
      </div>
	<!-- Di dalam TAB SETTING, setelah section Tampilan -->
<div class="setting-group">
  <h3>ğŸ–¨ï¸ Setting Printer</h3>
  
  <div class="setting-item">
    <div class="setting-label">Jenis Printer</div>
    <div class="setting-control">
      <select id="settingPrinterType">
        <option value="thermal">Thermal Printer (80mm)</option>
        <option value="a4">Printer A4</option>
        <option value="dotmatrix">Dot Matrix</option>
      </select>
    </div>
  </div>

  <div class="setting-item">
    <div class="setting-label">Font Size Struk</div>
    <div class="setting-control">
      <select id="settingStrukFontSize">
        <option value="small">Kecil</option>
        <option value="medium" selected>Sedang</option>
        <option value="large">Besar</option>
      </select>
    </div>
  </div>

  <div class="setting-item">
    <div class="setting-label">Header Struk</div>
    <div class="setting-control">
      <textarea id="settingStrukHeader" placeholder="Header struk (opsional)" rows="2"></textarea>
    </div>
  </div>

  <div class="setting-item">
    <div class="setting-label">Auto Print</div>
    <div class="setting-control">
      <label class="toggle-switch">
        <input type="checkbox" id="settingAutoPrint">
        <span class="toggle-slider"></span>
      </label>
      <span style="margin-left: 10px; font-size: 0.8rem;">Auto print setelah transaksi</span>
    </div>
  </div>

  <div class="setting-item">
    <div class="setting-label">Test Printer</div>
    <div class="setting-control">
      <button class="btn btn-primary" id="btnTestPrint">ğŸ–¨ï¸ Test Print</button>
    </div>
  </div>
</div>
 
<!-- Di dalam TAB SETTING, setelah section Printer -->
<div class="setting-group">
  <h3>ğŸ”¤ Pengaturan Font & Tampilan</h3>
  
  <div class="setting-item">
    <div class="setting-label">Jenis Font</div>
    <div class="setting-control">
      <select id="settingFontFamily">
        <option value="default">Default (Poppins)</option>
        <option value="Arial, sans-serif">Arial</option>
        <option value="'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Segoe UI</option>
        <option value="'Roboto', sans-serif">Roboto</option>
        <option value="'Montserrat', sans-serif">Montserrat</option>
        <option value="'Inter', sans-serif">Inter</option>
      </select>
    </div>
  </div>

  <div class="setting-item">
    <div class="setting-label">Ukuran Font</div>
    <div class="setting-control">
      <select id="settingFontSize">
        <option value="small">Kecil</option>
        <option value="normal" selected>Normal</option>
        <option value="large">Besar</option>
        <option value="xlarge">Sangat Besar</option>
      </select>
    </div>
  </div>

  <div class="setting-item">
    <div class="setting-label">Mode Layout</div>
    <div class="setting-control">
      <select id="settingLayoutMode">
        <option value="comfortable">Nyaman (Spasi Lebar)</option>
        <option value="compact">Kompak (Spasi Sempit)</option>
      </select>
    </div>
  </div>

  <div class="setting-item">
    <div class="setting-label">Posisi Sidebar</div>
    <div class="setting-control">
      <select id="settingSidebarPosition">
        <option value="left">Kiri (Default)</option>
        <option value="right">Kanan</option>
      </select>
    </div>
  </div>
</div>
    </section>
  </div>
</div>


<script src="script.js"></script>
</body>
</html>
